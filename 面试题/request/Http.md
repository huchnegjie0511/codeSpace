



# HTTP  /1.1

tcp连接   http请求  http响应   http断开响应

持久连接 一个TCP连接建立可以传输多个HTTP请求，减少了大量TCP连接和断开带来的开销 
为了解决http 1.0常常需要建立请求的问题

Connection：true||close

浏览器默认支持 6个TCP持久链接  
 - 队头阻塞
    曾用过管线化，使用服务器发起多个http请求同时发出
    1. 管线化
    2. 
 - 虚拟机
    请求头：Host 字段
- 动态内容
    （1.0）content-Length：1024
    chunk transfer 机制：将数据分割成若干个任意大小的数据块，每个数据块发送的时候都会附上发送的长度最后发送一个长度为0的数据块标志发完
    防止脚本攻击

    cookie的内容可以设置为不可读取状态
# HTTP /2.0
    http很难将带宽跑满
    由于tcp的慢启动
   - 1.1 的问题：带宽用不满
    1. TCP的慢启动：拥塞控制导致一定会慢启动，慢启动导致页面关键资源加载事件推后
    2. 多条TCP链接竞争带宽导致每条TCP链接中能被分配的带宽少
    3. 队头阻塞问题（只有上一个请求结束了以后才能进行下一个请求）
   - 2.0解决方案多路复用
    1. 一个域名只使用一个TCP长连接
    2. 将每一个请求分成一帧一帧的数据进行传输
    3. 根据请求编辑的加急还是不加急，服务端接收到带有各种标号的数据帧以后，可以区分数据帧是否加急，优先整理和响应该请求的数据帧
    该请求的数据帧（通过引入了二进制分帧层实现多路复用）
# HTTP 和 HTTPS

    GET /images/logo.png  HTTP/1.1 
- GET VS POST
    - 传输数据的方式：
        GET 请求将数据通过 URL 的查询字符串（query string）传输，数据会附加在 URL 后面，例如：http://example.com/page?name=value。
        POST 请求将数据放在请求体（request body）中传输，数据不会暴露在 URL 中，适合传输较大量或敏感数据。
    - 安全性：
        GET 请求的数据在 URL 中可见，容易被拦截、篡改或缓存，不适合传输敏感信息。
        POST 请求的数据在请求体中，相对安全，可以传输敏感信息，但仍可能受到中间人攻击。
    - 请求长度限制：
        GET 请求的长度有限制，受浏览器和服务器的限制，通常不适合传输大量数据。
        POST 请求没有明确的长度限制，可以传输较大量的数据。
    - 幂等性：（注册10次和20次不是幂等的 但如果更改文章10次和20次是幂等的）
        GET 请求是幂等的，多次请求相同的 URL 会得到相同的结果，不会产生副作用。（无副作用幂等的场景）
        POST 请求不是幂等的，多次请求可能会产生不同的结果，可能会产生副作用，例如提交订单。（有副作用非幂等的场景）
    - 缓存：
        GET 请求可以被缓存，因为请求是幂等的，可以安全地重用缓存的响应。
        POST 请求不能被缓存，因为请求可能会产生副作用，缓存的响应可能不再有效。
    - 编码类型
        GET 支持的编码类型有限
        POST 支持所有的编码类型

- 状态码

    - 1xx
        - 100：（继续） 请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。
        - 101：（切换协议） 请求者已要求服务器切换协议，服务器已确认并准备切换。
        - 102：由WebDAV（RFC 2518）扩展的状态码，代表处理将被继续执行。
    - 2xx
        - 200 已经接受请求
        - 204 获取到响应体，但是没有数据
        - 205 
        - 206
    - 3xx
        - 301
        - 302
        - 303
        - 304
    - 4xx
        - 400
        - 401
        - 403
        - 404

    500
    501
    503


- TLS 协议
    HTTPS = HTTP +TLS
 1. 对称加密
    双方都有相同的密钥，双方都知道如何加密和解密
    如何让双方都具有相同的密钥，通过网络传输该密钥，一旦被截获，那么之后的内容加密也会无意义

 2. 非对称加密（服务端生成公钥和私钥，将公钥发布，客户端获取接受到公钥后生成一个密钥，再利用公钥加密该密钥传输给服务端，服务端用独有的私钥解密得到密钥）
    使用公钥和私钥 公钥加密并且可以公开
    发起方准备公钥用于加密发送给另一端，客户端使用公钥加密密钥  发给发起方 发起方用私钥解密出密钥

# HTTP /3.0
   2.0 的缺陷：
    1. TCP的队头阻塞 
        TCP传递过程中由于单个包丢失导致的阻塞叫做队头阻塞（当TCP单个数据包丢失时，TCP会暂停后续的包的传输，先重传丢失的包的数据）
    2. TCP的慢启动


    - TCP协议僵化：TCP常用于物理层一旦TCP修改，路由器，交换机，防火墙全部失效 需要更新  操作系统
    - QUIC协议：
        基于UDP 在UDP上实现了类似于TCP的多路数据流，可靠性传输等功能
        1. 实现了类似于TCP的流量控制和可靠性传输 
        2. 集成了TLS加密
        3. 实现了 HTTP2 中的多路复用

