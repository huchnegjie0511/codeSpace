
# 浏览器进行布局的过程？

# 浏览器加载到资源（页面渲染）
1、解析html代码，生成一个DOM树
2、解析css，生成CSSOM树  通过key和value进行生成树  <!-- 无法进一步优化 -->
3、将DOM树和CSSOM树结合，去除不可见元素，生成  render tree
4、计算布局（回流/重排），根据render tree进行布局的计算，是为了得到每个节点的几何信息
页面一旦出现组合信息

5、绘制页面（重绘），GPU根据布局信息绘制
<!-- 浏览器无法通过html代码了解应该如何进行渲染 因此通过树进行了解具体如何进行转化 -->
- html展示结构
- css 进行修饰
相对开发效率来说
.a  .b  .c{

}
<!-- 下面比上面更加适合开发，只要命名不重复，就不会导致查找过程中从多次查找ab -->
.c{

}

<!-- 什么是回流? -->
- 浏览器计算页面布局的过程叫做回流
- 当一个容器的几何属性发现变更时,页面发生回流(不同的条件下回流的速度与范围也不同)
- 发生回流条件:
1. 改变窗口尺寸
2. 改变元素尺寸
3. 增加或者删除可见元素
4. 页面初次渲染

<!-- 什么是重绘? -->
- 将已经计算好的布局信息在屏幕上展示出来
  重绘的gpu占用比回流大
- 发生重绘条件:
1. 元素的非几何属性变化
2. 修改背景文件
3. 修改背景图片
4. 修改边框颜色
5. 字体颜色


- 回流一定重绘 重绘不一定回流

# 如何减少回流 重绘?
1. 合理利用浏览器的优化策略
2. 先display:none; 修改完样式以后,再block回来
3. 



当代浏览器都有渲染队列机制,当一个元素的样式变更导致需要回流时,这个操作会进入渲染队列,浏览器进行向下执行代码,如果仍然存在相同行为,则继续进入队列,直到下面没有样式修改,浏览器会批量化执行悬念渲染队列的回流过程,这只发生依次回流

获取长款和高宽的值
offsetWidth  offSetHeignt,offsetTop,offsetLeft  强制执行任务队列
clientWidth  clientHeight,clientTop,clientLeft
scrollWidth  scrollHeight,scrollTop,scrollLeft

全部都会导致浏览器的渲染队列强制执行



